-- ==============================
-- 테이블
-- ==============================
---@diagnostic disable: lowercase-global
local addonName, dodo = ...
dodoDB = dodoDB or {}

local gmf = GameMenuFrame
local mmbbb = MainMenuBarBackpackButton
local thf = TalkingHeadFrame

-- ==============================
-- 동작
-- ==============================
local function FrameScale()
    local db = dodoDB or {}

    local gmfScale = db.frameScale_gmf or 0.9
    local mmbbbScale = db.frameScale_mmbbb or 0.7
    local thfScale = db.frameScale_th or 0.8

    if gmf then gmf:SetScale(gmfScale) end
    if mmbbb then mmbbb:SetScale(mmbbbScale) end
    if thf then thf:SetScale(thfScale) end
end

-- ==============================
-- 이벤트
-- ==============================
local initFrameScale = CreateFrame("Frame")
initFrameScale:RegisterEvent("ADDON_LOADED")
initFrameScale:SetScript("OnEvent", function(self, event, arg1)
    if arg1 == addonName then
        dodoDB = dodoDB or {}
        self:RegisterEvent("PLAYER_LOGIN")
    elseif event == "PLAYER_LOGIN" then
        if FrameScale then FrameScale() end
        self:UnregisterAllEvents()
        self:SetScript("OnEvent", nil)
    end
end)

dodo.FrameScale = FrameScale